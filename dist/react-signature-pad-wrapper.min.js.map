{"version":3,"file":"react-signature-pad-wrapper.min.js","sources":["../node_modules/signature_pad/dist/signature_pad.mjs","../node_modules/throttle-debounce/throttle.js","../node_modules/throttle-debounce/debounce.js","../src/SignaturePad.js"],"sourcesContent":["/*!\n * Signature Pad v2.3.2\n * https://github.com/szimek/signature_pad\n *\n * Copyright 2019 Szymon Nowak\n * Released under the MIT license\n *\n * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:\n * http://corner.squareup.com/2012/07/smoother-signatures.html\n *\n * Implementation of interpolation using cubic Bézier curves is taken from:\n * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript\n *\n * Algorithm for approximated length of a Bézier curve is taken from:\n * http://www.lemoda.net/maths/bezier-length/index.html\n *\n */\n\nfunction Point(x, y, time) {\n  this.x = x;\n  this.y = y;\n  this.time = time || new Date().getTime();\n}\n\nPoint.prototype.velocityFrom = function (start) {\n  return this.time !== start.time ? this.distanceTo(start) / (this.time - start.time) : 1;\n};\n\nPoint.prototype.distanceTo = function (start) {\n  return Math.sqrt(Math.pow(this.x - start.x, 2) + Math.pow(this.y - start.y, 2));\n};\n\nPoint.prototype.equals = function (other) {\n  return this.x === other.x && this.y === other.y && this.time === other.time;\n};\n\nfunction Bezier(startPoint, control1, control2, endPoint) {\n  this.startPoint = startPoint;\n  this.control1 = control1;\n  this.control2 = control2;\n  this.endPoint = endPoint;\n}\n\n// Returns approximated length.\nBezier.prototype.length = function () {\n  var steps = 10;\n  var length = 0;\n  var px = void 0;\n  var py = void 0;\n\n  for (var i = 0; i <= steps; i += 1) {\n    var t = i / steps;\n    var cx = this._point(t, this.startPoint.x, this.control1.x, this.control2.x, this.endPoint.x);\n    var cy = this._point(t, this.startPoint.y, this.control1.y, this.control2.y, this.endPoint.y);\n    if (i > 0) {\n      var xdiff = cx - px;\n      var ydiff = cy - py;\n      length += Math.sqrt(xdiff * xdiff + ydiff * ydiff);\n    }\n    px = cx;\n    py = cy;\n  }\n\n  return length;\n};\n\n/* eslint-disable no-multi-spaces, space-in-parens */\nBezier.prototype._point = function (t, start, c1, c2, end) {\n  return start * (1.0 - t) * (1.0 - t) * (1.0 - t) + 3.0 * c1 * (1.0 - t) * (1.0 - t) * t + 3.0 * c2 * (1.0 - t) * t * t + end * t * t * t;\n};\n\n/* eslint-disable */\n\n// http://stackoverflow.com/a/27078401/815507\nfunction throttle(func, wait, options) {\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  if (!options) options = {};\n  var later = function later() {\n    previous = options.leading === false ? 0 : Date.now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n  return function () {\n    var now = Date.now();\n    if (!previous && options.leading === false) previous = now;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n}\n\nfunction SignaturePad(canvas, options) {\n  var self = this;\n  var opts = options || {};\n\n  this.velocityFilterWeight = opts.velocityFilterWeight || 0.7;\n  this.minWidth = opts.minWidth || 0.5;\n  this.maxWidth = opts.maxWidth || 2.5;\n  this.throttle = 'throttle' in opts ? opts.throttle : 16; // in miliseconds\n  this.minDistance = 'minDistance' in opts ? opts.minDistance : 5;\n\n  if (this.throttle) {\n    this._strokeMoveUpdate = throttle(SignaturePad.prototype._strokeUpdate, this.throttle);\n  } else {\n    this._strokeMoveUpdate = SignaturePad.prototype._strokeUpdate;\n  }\n\n  this.dotSize = opts.dotSize || function () {\n    return (this.minWidth + this.maxWidth) / 2;\n  };\n  this.penColor = opts.penColor || 'black';\n  this.backgroundColor = opts.backgroundColor || 'rgba(0,0,0,0)';\n  this.onBegin = opts.onBegin;\n  this.onEnd = opts.onEnd;\n\n  this._canvas = canvas;\n  this._ctx = canvas.getContext('2d');\n  this.clear();\n\n  // We need add these inline so they are available to unbind while still having\n  // access to 'self' we could use _.bind but it's not worth adding a dependency.\n  this._handleMouseDown = function (event) {\n    if (event.which === 1) {\n      self._mouseButtonDown = true;\n      self._strokeBegin(event);\n    }\n  };\n\n  this._handleMouseMove = function (event) {\n    if (self._mouseButtonDown) {\n      self._strokeMoveUpdate(event);\n    }\n  };\n\n  this._handleMouseUp = function (event) {\n    if (event.which === 1 && self._mouseButtonDown) {\n      self._mouseButtonDown = false;\n      self._strokeEnd(event);\n    }\n  };\n\n  this._handleTouchStart = function (event) {\n    if (event.targetTouches.length === 1) {\n      var touch = event.changedTouches[0];\n      self._strokeBegin(touch);\n    }\n  };\n\n  this._handleTouchMove = function (event) {\n    // Prevent scrolling.\n    event.preventDefault();\n\n    var touch = event.targetTouches[0];\n    self._strokeMoveUpdate(touch);\n  };\n\n  this._handleTouchEnd = function (event) {\n    var wasCanvasTouched = event.target === self._canvas;\n    if (wasCanvasTouched) {\n      event.preventDefault();\n      self._strokeEnd(event);\n    }\n  };\n\n  // Enable mouse and touch event handlers\n  this.on();\n}\n\n// Public methods\nSignaturePad.prototype.clear = function () {\n  var ctx = this._ctx;\n  var canvas = this._canvas;\n\n  ctx.fillStyle = this.backgroundColor;\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  this._data = [];\n  this._reset();\n  this._isEmpty = true;\n};\n\nSignaturePad.prototype.fromDataURL = function (dataUrl) {\n  var _this = this;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var image = new Image();\n  var ratio = options.ratio || window.devicePixelRatio || 1;\n  var width = options.width || this._canvas.width / ratio;\n  var height = options.height || this._canvas.height / ratio;\n\n  this._reset();\n  image.src = dataUrl;\n  image.onload = function () {\n    _this._ctx.drawImage(image, 0, 0, width, height);\n  };\n  this._isEmpty = false;\n};\n\nSignaturePad.prototype.toDataURL = function (type) {\n  var _canvas;\n\n  switch (type) {\n    case 'image/svg+xml':\n      return this._toSVG();\n    default:\n      for (var _len = arguments.length, options = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        options[_key - 1] = arguments[_key];\n      }\n\n      return (_canvas = this._canvas).toDataURL.apply(_canvas, [type].concat(options));\n  }\n};\n\nSignaturePad.prototype.on = function () {\n  this._handleMouseEvents();\n  this._handleTouchEvents();\n};\n\nSignaturePad.prototype.off = function () {\n  this._canvas.removeEventListener('mousedown', this._handleMouseDown);\n  this._canvas.removeEventListener('mousemove', this._handleMouseMove);\n  document.removeEventListener('mouseup', this._handleMouseUp);\n\n  this._canvas.removeEventListener('touchstart', this._handleTouchStart);\n  this._canvas.removeEventListener('touchmove', this._handleTouchMove);\n  this._canvas.removeEventListener('touchend', this._handleTouchEnd);\n};\n\nSignaturePad.prototype.isEmpty = function () {\n  return this._isEmpty;\n};\n\n// Private methods\nSignaturePad.prototype._strokeBegin = function (event) {\n  this._data.push([]);\n  this._reset();\n  this._strokeUpdate(event);\n\n  if (typeof this.onBegin === 'function') {\n    this.onBegin(event);\n  }\n};\n\nSignaturePad.prototype._strokeUpdate = function (event) {\n  var x = event.clientX;\n  var y = event.clientY;\n\n  var point = this._createPoint(x, y);\n  var lastPointGroup = this._data[this._data.length - 1];\n  var lastPoint = lastPointGroup && lastPointGroup[lastPointGroup.length - 1];\n  var isLastPointTooClose = lastPoint && point.distanceTo(lastPoint) < this.minDistance;\n\n  // Skip this point if it's too close to the previous one\n  if (!(lastPoint && isLastPointTooClose)) {\n    var _addPoint = this._addPoint(point),\n        curve = _addPoint.curve,\n        widths = _addPoint.widths;\n\n    if (curve && widths) {\n      this._drawCurve(curve, widths.start, widths.end);\n    }\n\n    if (!(this._data && this._data[this._data.length - 1])) {\n      this._data = [[]];\n    }\n    this._data[this._data.length - 1].push({\n      x: point.x,\n      y: point.y,\n      time: point.time,\n      color: this.penColor\n    });\n  }\n};\n\nSignaturePad.prototype._strokeEnd = function (event) {\n  var canDrawCurve = this.points.length > 2;\n  var point = this.points[0]; // Point instance\n\n  if (!canDrawCurve && point) {\n    this._drawDot(point);\n  }\n\n  if (point) {\n    var lastPointGroup = this._data[this._data.length - 1];\n    var lastPoint = lastPointGroup[lastPointGroup.length - 1]; // plain object\n\n    // When drawing a dot, there's only one point in a group, so without this check\n    // such group would end up with exactly the same 2 points.\n    if (!point.equals(lastPoint)) {\n      lastPointGroup.push({\n        x: point.x,\n        y: point.y,\n        time: point.time,\n        color: this.penColor\n      });\n    }\n  }\n\n  if (typeof this.onEnd === 'function') {\n    this.onEnd(event);\n  }\n};\n\nSignaturePad.prototype._handleMouseEvents = function () {\n  this._mouseButtonDown = false;\n\n  this._canvas.addEventListener('mousedown', this._handleMouseDown);\n  this._canvas.addEventListener('mousemove', this._handleMouseMove);\n  document.addEventListener('mouseup', this._handleMouseUp);\n};\n\nSignaturePad.prototype._handleTouchEvents = function () {\n  // Pass touch events to canvas element on mobile IE11 and Edge.\n  this._canvas.style.msTouchAction = 'none';\n  this._canvas.style.touchAction = 'none';\n\n  this._canvas.addEventListener('touchstart', this._handleTouchStart);\n  this._canvas.addEventListener('touchmove', this._handleTouchMove);\n  this._canvas.addEventListener('touchend', this._handleTouchEnd);\n};\n\nSignaturePad.prototype._reset = function () {\n  this.points = [];\n  this._lastVelocity = 0;\n  this._lastWidth = (this.minWidth + this.maxWidth) / 2;\n  this._ctx.fillStyle = this.penColor;\n};\n\nSignaturePad.prototype._createPoint = function (x, y, time) {\n  var rect = this._canvas.getBoundingClientRect();\n\n  return new Point(x - rect.left, y - rect.top, time || new Date().getTime());\n};\n\nSignaturePad.prototype._addPoint = function (point) {\n  var points = this.points;\n  var tmp = void 0;\n\n  points.push(point);\n\n  if (points.length > 2) {\n    // To reduce the initial lag make it work with 3 points\n    // by copying the first point to the beginning.\n    if (points.length === 3) points.unshift(points[0]);\n\n    tmp = this._calculateCurveControlPoints(points[0], points[1], points[2]);\n    var c2 = tmp.c2;\n    tmp = this._calculateCurveControlPoints(points[1], points[2], points[3]);\n    var c3 = tmp.c1;\n    var curve = new Bezier(points[1], c2, c3, points[2]);\n    var widths = this._calculateCurveWidths(curve);\n\n    // Remove the first element from the list,\n    // so that we always have no more than 4 points in points array.\n    points.shift();\n\n    return { curve: curve, widths: widths };\n  }\n\n  return {};\n};\n\nSignaturePad.prototype._calculateCurveControlPoints = function (s1, s2, s3) {\n  var dx1 = s1.x - s2.x;\n  var dy1 = s1.y - s2.y;\n  var dx2 = s2.x - s3.x;\n  var dy2 = s2.y - s3.y;\n\n  var m1 = { x: (s1.x + s2.x) / 2.0, y: (s1.y + s2.y) / 2.0 };\n  var m2 = { x: (s2.x + s3.x) / 2.0, y: (s2.y + s3.y) / 2.0 };\n\n  var l1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n  var l2 = Math.sqrt(dx2 * dx2 + dy2 * dy2);\n\n  var dxm = m1.x - m2.x;\n  var dym = m1.y - m2.y;\n\n  var k = l2 / (l1 + l2);\n  var cm = { x: m2.x + dxm * k, y: m2.y + dym * k };\n\n  var tx = s2.x - cm.x;\n  var ty = s2.y - cm.y;\n\n  return {\n    c1: new Point(m1.x + tx, m1.y + ty),\n    c2: new Point(m2.x + tx, m2.y + ty)\n  };\n};\n\nSignaturePad.prototype._calculateCurveWidths = function (curve) {\n  var startPoint = curve.startPoint;\n  var endPoint = curve.endPoint;\n  var widths = { start: null, end: null };\n\n  var velocity = this.velocityFilterWeight * endPoint.velocityFrom(startPoint) + (1 - this.velocityFilterWeight) * this._lastVelocity;\n\n  var newWidth = this._strokeWidth(velocity);\n\n  widths.start = this._lastWidth;\n  widths.end = newWidth;\n\n  this._lastVelocity = velocity;\n  this._lastWidth = newWidth;\n\n  return widths;\n};\n\nSignaturePad.prototype._strokeWidth = function (velocity) {\n  return Math.max(this.maxWidth / (velocity + 1), this.minWidth);\n};\n\nSignaturePad.prototype._drawPoint = function (x, y, size) {\n  var ctx = this._ctx;\n\n  ctx.moveTo(x, y);\n  ctx.arc(x, y, size, 0, 2 * Math.PI, false);\n  this._isEmpty = false;\n};\n\nSignaturePad.prototype._drawCurve = function (curve, startWidth, endWidth) {\n  var ctx = this._ctx;\n  var widthDelta = endWidth - startWidth;\n  var drawSteps = Math.floor(curve.length());\n\n  ctx.beginPath();\n\n  for (var i = 0; i < drawSteps; i += 1) {\n    // Calculate the Bezier (x, y) coordinate for this step.\n    var t = i / drawSteps;\n    var tt = t * t;\n    var ttt = tt * t;\n    var u = 1 - t;\n    var uu = u * u;\n    var uuu = uu * u;\n\n    var x = uuu * curve.startPoint.x;\n    x += 3 * uu * t * curve.control1.x;\n    x += 3 * u * tt * curve.control2.x;\n    x += ttt * curve.endPoint.x;\n\n    var y = uuu * curve.startPoint.y;\n    y += 3 * uu * t * curve.control1.y;\n    y += 3 * u * tt * curve.control2.y;\n    y += ttt * curve.endPoint.y;\n\n    var width = startWidth + ttt * widthDelta;\n    this._drawPoint(x, y, width);\n  }\n\n  ctx.closePath();\n  ctx.fill();\n};\n\nSignaturePad.prototype._drawDot = function (point) {\n  var ctx = this._ctx;\n  var width = typeof this.dotSize === 'function' ? this.dotSize() : this.dotSize;\n\n  ctx.beginPath();\n  this._drawPoint(point.x, point.y, width);\n  ctx.closePath();\n  ctx.fill();\n};\n\nSignaturePad.prototype._fromData = function (pointGroups, drawCurve, drawDot) {\n  for (var i = 0; i < pointGroups.length; i += 1) {\n    var group = pointGroups[i];\n\n    if (group.length > 1) {\n      for (var j = 0; j < group.length; j += 1) {\n        var rawPoint = group[j];\n        var point = new Point(rawPoint.x, rawPoint.y, rawPoint.time);\n        var color = rawPoint.color;\n\n        if (j === 0) {\n          // First point in a group. Nothing to draw yet.\n\n          // All points in the group have the same color, so it's enough to set\n          // penColor just at the beginning.\n          this.penColor = color;\n          this._reset();\n\n          this._addPoint(point);\n        } else if (j !== group.length - 1) {\n          // Middle point in a group.\n          var _addPoint2 = this._addPoint(point),\n              curve = _addPoint2.curve,\n              widths = _addPoint2.widths;\n\n          if (curve && widths) {\n            drawCurve(curve, widths, color);\n          }\n        } else {\n          // Last point in a group. Do nothing.\n        }\n      }\n    } else {\n      this._reset();\n      var _rawPoint = group[0];\n      drawDot(_rawPoint);\n    }\n  }\n};\n\nSignaturePad.prototype._toSVG = function () {\n  var _this2 = this;\n\n  var pointGroups = this._data;\n  var canvas = this._canvas;\n  var ratio = Math.max(window.devicePixelRatio || 1, 1);\n  var minX = 0;\n  var minY = 0;\n  var maxX = canvas.width / ratio;\n  var maxY = canvas.height / ratio;\n  var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\n  svg.setAttributeNS(null, 'width', canvas.width);\n  svg.setAttributeNS(null, 'height', canvas.height);\n\n  this._fromData(pointGroups, function (curve, widths, color) {\n    var path = document.createElement('path');\n\n    // Need to check curve for NaN values, these pop up when drawing\n    // lines on the canvas that are not continuous. E.g. Sharp corners\n    // or stopping mid-stroke and than continuing without lifting mouse.\n    if (!isNaN(curve.control1.x) && !isNaN(curve.control1.y) && !isNaN(curve.control2.x) && !isNaN(curve.control2.y)) {\n      var attr = 'M ' + curve.startPoint.x.toFixed(3) + ',' + curve.startPoint.y.toFixed(3) + ' ' + ('C ' + curve.control1.x.toFixed(3) + ',' + curve.control1.y.toFixed(3) + ' ') + (curve.control2.x.toFixed(3) + ',' + curve.control2.y.toFixed(3) + ' ') + (curve.endPoint.x.toFixed(3) + ',' + curve.endPoint.y.toFixed(3));\n\n      path.setAttribute('d', attr);\n      path.setAttribute('stroke-width', (widths.end * 2.25).toFixed(3));\n      path.setAttribute('stroke', color);\n      path.setAttribute('fill', 'none');\n      path.setAttribute('stroke-linecap', 'round');\n\n      svg.appendChild(path);\n    }\n  }, function (rawPoint) {\n    var circle = document.createElement('circle');\n    var dotSize = typeof _this2.dotSize === 'function' ? _this2.dotSize() : _this2.dotSize;\n    circle.setAttribute('r', dotSize);\n    circle.setAttribute('cx', rawPoint.x);\n    circle.setAttribute('cy', rawPoint.y);\n    circle.setAttribute('fill', rawPoint.color);\n\n    svg.appendChild(circle);\n  });\n\n  var prefix = 'data:image/svg+xml;base64,';\n  var header = '<svg' + ' xmlns=\"http://www.w3.org/2000/svg\"' + ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"' + (' viewBox=\"' + minX + ' ' + minY + ' ' + maxX + ' ' + maxY + '\"') + (' width=\"' + maxX + '\"') + (' height=\"' + maxY + '\"') + '>';\n  var body = svg.innerHTML;\n\n  // IE hack for missing innerHTML property on SVGElement\n  if (body === undefined) {\n    var dummy = document.createElement('dummy');\n    var nodes = svg.childNodes;\n    dummy.innerHTML = '';\n\n    for (var i = 0; i < nodes.length; i += 1) {\n      dummy.appendChild(nodes[i].cloneNode(true));\n    }\n\n    body = dummy.innerHTML;\n  }\n\n  var footer = '</svg>';\n  var data = header + body + footer;\n\n  return prefix + btoa(data);\n};\n\nSignaturePad.prototype.fromData = function (pointGroups) {\n  var _this3 = this;\n\n  this.clear();\n\n  this._fromData(pointGroups, function (curve, widths) {\n    return _this3._drawCurve(curve, widths.start, widths.end);\n  }, function (rawPoint) {\n    return _this3._drawDot(rawPoint);\n  });\n\n  // this._data = pointGroups;\n  this._data = pointGroups ? pointGroups : [];\n};\n\nSignaturePad.prototype.toData = function () {\n  return this._data;\n};\n\nexport default SignaturePad;\n","/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {Number}    delay          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}   noTrailing     Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset)\n * @param  {Function}  callback       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {Boolean}   debounceMode   If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @return {Function}  A new, throttled, function.\n */\nmodule.exports = function ( delay, noTrailing, callback, debounceMode ) {\n\n\t// After wrapper has stopped being called, this timeout ensures that\n\t// `callback` is executed at the proper times in `throttle` and `end`\n\t// debounce modes.\n\tvar timeoutID;\n\n\t// Keep track of the last time `callback` was executed.\n\tvar lastExec = 0;\n\n\t// `noTrailing` defaults to falsy.\n\tif ( typeof noTrailing !== 'boolean' ) {\n\t\tdebounceMode = callback;\n\t\tcallback = noTrailing;\n\t\tnoTrailing = undefined;\n\t}\n\n\t// The `wrapper` function encapsulates all of the throttling / debouncing\n\t// functionality and when executed will limit the rate at which `callback`\n\t// is executed.\n\tfunction wrapper () {\n\n\t\tvar self = this;\n\t\tvar elapsed = Number(new Date()) - lastExec;\n\t\tvar args = arguments;\n\n\t\t// Execute `callback` and update the `lastExec` timestamp.\n\t\tfunction exec () {\n\t\t\tlastExec = Number(new Date());\n\t\t\tcallback.apply(self, args);\n\t\t}\n\n\t\t// If `debounceMode` is true (at begin) this is used to clear the flag\n\t\t// to allow future `callback` executions.\n\t\tfunction clear () {\n\t\t\ttimeoutID = undefined;\n\t\t}\n\n\t\tif ( debounceMode && !timeoutID ) {\n\t\t\t// Since `wrapper` is being called for the first time and\n\t\t\t// `debounceMode` is true (at begin), execute `callback`.\n\t\t\texec();\n\t\t}\n\n\t\t// Clear any existing timeout.\n\t\tif ( timeoutID ) {\n\t\t\tclearTimeout(timeoutID);\n\t\t}\n\n\t\tif ( debounceMode === undefined && elapsed > delay ) {\n\t\t\t// In throttle mode, if `delay` time has been exceeded, execute\n\t\t\t// `callback`.\n\t\t\texec();\n\n\t\t} else if ( noTrailing !== true ) {\n\t\t\t// In trailing throttle mode, since `delay` time has not been\n\t\t\t// exceeded, schedule `callback` to execute `delay` ms after most\n\t\t\t// recent execution.\n\t\t\t//\n\t\t\t// If `debounceMode` is true (at begin), schedule `clear` to execute\n\t\t\t// after `delay` ms.\n\t\t\t//\n\t\t\t// If `debounceMode` is false (at end), schedule `callback` to\n\t\t\t// execute after `delay` ms.\n\t\t\ttimeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n\t\t}\n\n\t}\n\n\t// Return the wrapper function.\n\treturn wrapper;\n\n};\n","/* eslint-disable no-undefined */\n\nvar throttle = require('./throttle');\n\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param  {Number}   delay         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}  atBegin       Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n * @param  {Function} callback      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                  to `callback` when the debounced-function is executed.\n *\n * @return {Function} A new, debounced function.\n */\nmodule.exports = function ( delay, atBegin, callback ) {\n\treturn callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);\n};\n","import React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport SigPad from 'signature_pad';\nimport debounce from 'throttle-debounce/debounce';\n\nclass SignaturePad extends PureComponent {\n\n    static displayName = 'react-signature-pad-wrapper';\n\n    static propTypes = {\n        width: PropTypes.number,\n        height: PropTypes.number,\n        options: PropTypes.object,\n        redrawOnResize: PropTypes.bool.isRequired,\n        debounceInterval: PropTypes.number.isRequired,\n        canvasProps: PropTypes.object\n    }\n\n    static defaultProps = {\n        redrawOnResize: false,\n        debounceInterval: 150\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {canvasWidth: 0, canvasHeight: 0};\n\n        this._callResizeHandler = debounce(\n            this.props.debounceInterval,\n            this.handleResize.bind(this)\n        );\n    }\n\n    componentDidMount() {\n        if (this._canvas) {\n            if (!this.props.width || !this.props.height) {\n                this._canvas.style.width = '100%';\n            }\n            this.scaleCanvas();\n\n            if (!this.props.width || !this.props.height) {\n                window.addEventListener('resize', this._callResizeHandler);\n            }\n\n            this._signaturePad = new SigPad(this._canvas, this.props.options);\n        }\n    }\n\n    componentWillUnmount() {\n        if (!this.props.width || !this.props.height) {\n            window.removeEventListener('resize', this._callResizeHandler);\n        }\n\n        this._signaturePad.off();\n    }\n\n    /**\n     * Get the original signature_pad instance.\n     */\n    get instance() {\n        return this._signaturePad;\n    }\n\n    get canvas() {\n        return this._canvas;\n    }\n\n    set dotSize(dotSize) {\n        this._signaturePad.dotSize = dotSize;\n    }\n\n    get dotSize() {\n        return this._signaturePad.dotSize;\n    }\n\n    set minWidth(minWidth) {\n        this._signaturePad.minWidth = minWidth;\n    }\n\n    get minWidth() {\n        return this._signaturePad.minWidth;\n    }\n\n    set maxWidth(maxWidth) {\n        this._signaturePad.maxWidth = maxWidth;\n    }\n\n    get maxWidth() {\n        return this._signaturePad.maxWidth;\n    }\n\n    set throttle(throttle) {\n        this._signaturePad.throttle = throttle;\n    }\n\n    get throttle() {\n        return this._signaturePad.throttle;\n    }\n\n    set backgroundColor(color) {\n        this._signaturePad.backgroundColor = color;\n    }\n\n    get backgroundColor() {\n        return this._signaturePad.backgroundColor;\n    }\n\n    set penColor(color) {\n        this._signaturePad.penColor = color;\n    }\n\n    get penColor() {\n        return this._signaturePad.penColor;\n    }\n\n    set velocityFilterWeight(weight) {\n        this._signaturePad.velocityFilterWeight = weight;\n    }\n\n    get velocityFilterWeight() {\n        return this._signaturePad.velocityFilterWeight;\n    }\n\n    set onBegin(fn) {\n        if (!(fn && typeof fn === 'function')) {\n            throw new Error('Invalid argument passed to onBegin()');\n        }\n\n        this._signaturePad.onBegin = fn;\n    }\n\n    set onEnd(fn) {\n        if (!(fn && typeof fn === 'function')) {\n            throw new Error('Invalid argument passed to onEnd()');\n        }\n\n        this._signaturePad.onEnd = fn;\n    }\n\n    isEmpty() {\n        return this._signaturePad.isEmpty();\n    }\n\n    clear() {\n        this._signaturePad.clear();\n    }\n\n    fromDataURL(base64String) {\n        this._signaturePad.fromDataURL(base64String);\n    }\n\n    toDataURL(mime) {\n        return this._signaturePad.toDataURL(mime);\n    }\n\n    fromData(data) {\n        this._signaturePad.fromData(data);\n    }\n\n    toData() {\n        return this._signaturePad.toData();\n    }\n\n    off() {\n        this._signaturePad.off();\n    }\n\n    on() {\n        this._signaturePad.on();\n    }\n\n    handleResize() {\n        this.scaleCanvas();\n    }\n\n    scaleCanvas() {\n        const ratio = Math.max(window.devicePixelRatio || 1, 1);\n        const width = (this.props.width || this._canvas.offsetWidth) * ratio;\n        const height = (this.props.height || this._canvas.offsetHeight) * ratio;\n\n        // Avoid needlessly setting height/width if dimensions haven't changed\n        const {canvasWidth, canvasHeight} = this.state;\n        if (width === canvasWidth && height === canvasHeight) return;\n\n        let data;\n        if (this.props.redrawOnResize && this._signaturePad) {\n            data = this._signaturePad.toDataURL();\n        }\n\n        this._canvas.width = width;\n        this._canvas.height = height;\n\n        this.setState({canvasWidth: width, canvasHeight: height});\n\n        const ctx = this._canvas.getContext('2d');\n        ctx.scale(ratio, ratio);\n\n        if (this.props.redrawOnResize && this._signaturePad) {\n            this._signaturePad.fromDataURL(data);\n        } else if (this._signaturePad) {\n            this._signaturePad.clear();\n        }\n    }\n\n    render() {\n        const {canvasProps} = this.props;\n\n        return (\n            <canvas\n                ref={ref => this._canvas = ref}\n                {...canvasProps} />\n        );\n    }\n\n}\n\nexport default SignaturePad;\n"],"names":["Point","x","y","time","this","Date","getTime","Bezier","startPoint","control1","control2","endPoint","throttle","func","wait","options","context","args","result","timeout","previous","later","leading","now","apply","remaining","arguments","clearTimeout","trailing","setTimeout","SignaturePad","canvas","self","opts","velocityFilterWeight","minWidth","maxWidth","minDistance","_strokeMoveUpdate","prototype","_strokeUpdate","dotSize","penColor","backgroundColor","onBegin","onEnd","_canvas","_ctx","getContext","clear","_handleMouseDown","event","which","_mouseButtonDown","_strokeBegin","_handleMouseMove","_handleMouseUp","_strokeEnd","_handleTouchStart","targetTouches","length","touch","changedTouches","_handleTouchMove","preventDefault","_handleTouchEnd","target","on","velocityFrom","start","distanceTo","Math","sqrt","pow","equals","other","px","py","i","t","cx","_point","cy","xdiff","ydiff","c1","c2","end","ctx","fillStyle","clearRect","width","height","fillRect","_data","_reset","_isEmpty","fromDataURL","dataUrl","_this","undefined","image","Image","ratio","window","devicePixelRatio","src","onload","drawImage","toDataURL","type","_toSVG","_len","Array","_key","concat","_handleMouseEvents","_handleTouchEvents","off","removeEventListener","document","isEmpty","push","clientX","clientY","point","_createPoint","lastPointGroup","lastPoint","isLastPointTooClose","_addPoint","curve","widths","_drawCurve","color","canDrawCurve","points","_drawDot","addEventListener","style","msTouchAction","touchAction","_lastVelocity","_lastWidth","rect","getBoundingClientRect","left","top","unshift","_calculateCurveControlPoints","c3","_calculateCurveWidths","shift","s1","s2","s3","dx1","dy1","dx2","dy2","m1","m2","l1","l2","k","cm","tx","ty","velocity","newWidth","_strokeWidth","max","_drawPoint","size","moveTo","arc","PI","startWidth","endWidth","widthDelta","drawSteps","floor","beginPath","tt","ttt","u","uu","uuu","closePath","fill","_fromData","pointGroups","drawCurve","drawDot","group","j","rawPoint","_addPoint2","_this2","maxX","maxY","svg","createElementNS","setAttributeNS","path","createElement","isNaN","attr","toFixed","setAttribute","appendChild","circle","header","body","innerHTML","dummy","nodes","childNodes","cloneNode","btoa","fromData","_this3","toData","delay","noTrailing","callback","debounceMode","timeoutID","lastExec","elapsed","Number","exec","atBegin","props","state","canvasWidth","canvasHeight","_callResizeHandler","debounce","debounceInterval","handleResize","bind","scaleCanvas","_signaturePad","SigPad","base64String","mime","data","offsetWidth","offsetHeight","redrawOnResize","setState","scale","canvasProps","React","ref","weight","fn","Error","PureComponent","displayName","propTypes","PropTypes","number","object","bool","isRequired","defaultProps"],"mappings":"mNAkBA,SAASA,MAAMC,EAAGC,EAAGC,GACnBC,KAAKH,EAAIA,EACTG,KAAKF,EAAIA,EACTE,KAAKD,KAAOA,IAAQ,IAAIE,MAAOC,UAejC,SAASC,OAAOC,EAAYC,EAAUC,EAAUC,GAC9CP,KAAKI,WAAaA,EAClBJ,KAAKK,SAAWA,EAChBL,KAAKM,SAAWA,EAChBN,KAAKO,SAAWA,EAkClB,SAASC,SAASC,EAAMC,EAAMC,GAC5B,IAAIC,EAASC,EAAMC,EACfC,EAAU,KACVC,EAAW,EACVL,IAASA,MACd,IAAIM,EAAQ,WACVD,GAA+B,IAApBL,EAAQO,QAAoB,EAAIjB,KAAKkB,MAChDJ,EAAU,KACVD,EAASL,EAAKW,MAAMR,EAASC,GACxBE,IAASH,EAAUC,EAAO,OAEjC,OAAO,WACL,IAAIM,EAAMlB,KAAKkB,MACVH,IAAgC,IAApBL,EAAQO,UAAmBF,EAAWG,GACvD,IAAIE,EAAYX,GAAQS,EAAMH,GAc9B,OAbAJ,EAAUZ,KACVa,EAAOS,UACHD,GAAa,GAAKA,EAAYX,GAC5BK,IACFQ,aAAaR,GACbA,EAAU,MAEZC,EAAWG,EACXL,EAASL,EAAKW,MAAMR,EAASC,GACxBE,IAASH,EAAUC,EAAO,OACrBE,IAAgC,IAArBJ,EAAQa,WAC7BT,EAAUU,WAAWR,EAAOI,IAEvBP,GAIX,SAASY,aAAaC,EAAQhB,GAC5B,IAAIiB,EAAO5B,KACP6B,EAAOlB,MAEXX,KAAK8B,qBAAuBD,EAAKC,sBAAwB,GACzD9B,KAAK+B,SAAWF,EAAKE,UAAY,GACjC/B,KAAKgC,SAAWH,EAAKG,UAAY,IACjChC,KAAKQ,SAAW,aAAcqB,EAAOA,EAAKrB,SAAW,GACrDR,KAAKiC,YAAc,gBAAiBJ,EAAOA,EAAKI,YAAc,EAE1DjC,KAAKQ,SACPR,KAAKkC,kBAAoB1B,SAASkB,aAAaS,UAAUC,cAAepC,KAAKQ,UAE7ER,KAAKkC,kBAAoBR,aAAaS,UAAUC,cAGlDpC,KAAKqC,QAAUR,EAAKQ,SAAW,WAC7B,OAAQrC,KAAK+B,SAAW/B,KAAKgC,UAAY,GAE3ChC,KAAKsC,SAAWT,EAAKS,UAAY,QACjCtC,KAAKuC,gBAAkBV,EAAKU,iBAAmB,gBAC/CvC,KAAKwC,QAAUX,EAAKW,QACpBxC,KAAKyC,MAAQZ,EAAKY,MAElBzC,KAAK0C,QAAUf,EACf3B,KAAK2C,KAAOhB,EAAOiB,WAAW,MAC9B5C,KAAK6C,QAIL7C,KAAK8C,iBAAmB,SAAUC,GACZ,IAAhBA,EAAMC,QACRpB,EAAKqB,kBAAmB,EACxBrB,EAAKsB,aAAaH,KAItB/C,KAAKmD,iBAAmB,SAAUJ,GAC5BnB,EAAKqB,kBACPrB,EAAKM,kBAAkBa,IAI3B/C,KAAKoD,eAAiB,SAAUL,GACV,IAAhBA,EAAMC,OAAepB,EAAKqB,mBAC5BrB,EAAKqB,kBAAmB,EACxBrB,EAAKyB,WAAWN,KAIpB/C,KAAKsD,kBAAoB,SAAUP,GACjC,GAAmC,IAA/BA,EAAMQ,cAAcC,OAAc,CACpC,IAAIC,EAAQV,EAAMW,eAAe,GACjC9B,EAAKsB,aAAaO,KAItBzD,KAAK2D,iBAAmB,SAAUZ,GAEhCA,EAAMa,iBAEN,IAAIH,EAAQV,EAAMQ,cAAc,GAChC3B,EAAKM,kBAAkBuB,IAGzBzD,KAAK6D,gBAAkB,SAAUd,GACRA,EAAMe,SAAWlC,EAAKc,UAE3CK,EAAMa,iBACNhC,EAAKyB,WAAWN,KAKpB/C,KAAK+D,KA5JPnE,MAAMuC,UAAU6B,aAAe,SAAUC,GACvC,OAAOjE,KAAKD,OAASkE,EAAMlE,KAAOC,KAAKkE,WAAWD,IAAUjE,KAAKD,KAAOkE,EAAMlE,MAAQ,GAGxFH,MAAMuC,UAAU+B,WAAa,SAAUD,GACrC,OAAOE,KAAKC,KAAKD,KAAKE,IAAIrE,KAAKH,EAAIoE,EAAMpE,EAAG,GAAKsE,KAAKE,IAAIrE,KAAKF,EAAImE,EAAMnE,EAAG,KAG9EF,MAAMuC,UAAUmC,OAAS,SAAUC,GACjC,OAAOvE,KAAKH,IAAM0E,EAAM1E,GAAKG,KAAKF,IAAMyE,EAAMzE,GAAKE,KAAKD,OAASwE,EAAMxE,MAWzEI,OAAOgC,UAAUqB,OAAS,WAMxB,IALA,IACIA,EAAS,EACTgB,OAAK,EACLC,OAAK,EAEAC,EAAI,EAAGA,GALJ,GAKgBA,GAAK,EAAG,CAClC,IAAIC,EAAID,EANE,GAONE,EAAK5E,KAAK6E,OAAOF,EAAG3E,KAAKI,WAAWP,EAAGG,KAAKK,SAASR,EAAGG,KAAKM,SAAST,EAAGG,KAAKO,SAASV,GACvFiF,EAAK9E,KAAK6E,OAAOF,EAAG3E,KAAKI,WAAWN,EAAGE,KAAKK,SAASP,EAAGE,KAAKM,SAASR,EAAGE,KAAKO,SAAST,GAC3F,GAAI4E,EAAI,EAAG,CACT,IAAIK,EAAQH,EAAKJ,EACbQ,EAAQF,EAAKL,EACjBjB,GAAUW,KAAKC,KAAKW,EAAQA,EAAQC,EAAQA,GAE9CR,EAAKI,EACLH,EAAKK,EAGP,OAAOtB,GAITrD,OAAOgC,UAAU0C,OAAS,SAAUF,EAAGV,EAAOgB,EAAIC,EAAIC,GACpD,OAAOlB,GAAS,EAAMU,IAAM,EAAMA,IAAM,EAAMA,GAAK,EAAMM,GAAM,EAAMN,IAAM,EAAMA,GAAKA,EAAI,EAAMO,GAAM,EAAMP,GAAKA,EAAIA,EAAIQ,EAAMR,EAAIA,EAAIA,GAoHzIjD,aAAaS,UAAUU,MAAQ,WAC7B,IAAIuC,EAAMpF,KAAK2C,KACXhB,EAAS3B,KAAK0C,QAElB0C,EAAIC,UAAYrF,KAAKuC,gBACrB6C,EAAIE,UAAU,EAAG,EAAG3D,EAAO4D,MAAO5D,EAAO6D,QACzCJ,EAAIK,SAAS,EAAG,EAAG9D,EAAO4D,MAAO5D,EAAO6D,QAExCxF,KAAK0F,SACL1F,KAAK2F,SACL3F,KAAK4F,UAAW,GAGlBlE,aAAaS,UAAU0D,YAAc,SAAUC,GAC7C,IAAIC,EAAQ/F,KAERW,EAAUW,UAAUkC,OAAS,QAAsBwC,IAAjB1E,UAAU,GAAmBA,UAAU,MAEzE2E,EAAQ,IAAIC,MACZC,EAAQxF,EAAQwF,OAASC,OAAOC,kBAAoB,EACpDd,EAAQ5E,EAAQ4E,OAASvF,KAAK0C,QAAQ6C,MAAQY,EAC9CX,EAAS7E,EAAQ6E,QAAUxF,KAAK0C,QAAQ8C,OAASW,EAErDnG,KAAK2F,SACLM,EAAMK,IAAMR,EACZG,EAAMM,OAAS,WACbR,EAAMpD,KAAK6D,UAAUP,EAAO,EAAG,EAAGV,EAAOC,IAE3CxF,KAAK4F,UAAW,GAGlBlE,aAAaS,UAAUsE,UAAY,SAAUC,GAC3C,IAAIhE,EAEJ,OAAQgE,GACN,IAAK,gBACH,OAAO1G,KAAK2G,SACd,QACE,IAAK,IAAIC,EAAOtF,UAAUkC,OAAQ7C,EAAUkG,MAAMD,EAAO,EAAIA,EAAO,EAAI,GAAIE,EAAO,EAAGA,EAAOF,EAAME,IACjGnG,EAAQmG,EAAO,GAAKxF,UAAUwF,GAGhC,OAAQpE,EAAU1C,KAAK0C,SAAS+D,UAAUrF,MAAMsB,GAAUgE,GAAMK,OAAOpG,MAI7Ee,aAAaS,UAAU4B,GAAK,WAC1B/D,KAAKgH,qBACLhH,KAAKiH,sBAGPvF,aAAaS,UAAU+E,IAAM,WAC3BlH,KAAK0C,QAAQyE,oBAAoB,YAAanH,KAAK8C,kBACnD9C,KAAK0C,QAAQyE,oBAAoB,YAAanH,KAAKmD,kBACnDiE,SAASD,oBAAoB,UAAWnH,KAAKoD,gBAE7CpD,KAAK0C,QAAQyE,oBAAoB,aAAcnH,KAAKsD,mBACpDtD,KAAK0C,QAAQyE,oBAAoB,YAAanH,KAAK2D,kBACnD3D,KAAK0C,QAAQyE,oBAAoB,WAAYnH,KAAK6D,kBAGpDnC,aAAaS,UAAUkF,QAAU,WAC/B,OAAOrH,KAAK4F,UAIdlE,aAAaS,UAAUe,aAAe,SAAUH,GAC9C/C,KAAK0F,MAAM4B,SACXtH,KAAK2F,SACL3F,KAAKoC,cAAcW,GAES,mBAAjB/C,KAAKwC,SACdxC,KAAKwC,QAAQO,IAIjBrB,aAAaS,UAAUC,cAAgB,SAAUW,GAC/C,IAAIlD,EAAIkD,EAAMwE,QACVzH,EAAIiD,EAAMyE,QAEVC,EAAQzH,KAAK0H,aAAa7H,EAAGC,GAC7B6H,EAAiB3H,KAAK0F,MAAM1F,KAAK0F,MAAMlC,OAAS,GAChDoE,EAAYD,GAAkBA,EAAeA,EAAenE,OAAS,GACrEqE,EAAsBD,GAAaH,EAAMvD,WAAW0D,GAAa5H,KAAKiC,YAG1E,IAAM2F,IAAaC,EAAsB,CACvC,IAAIC,EAAY9H,KAAK8H,UAAUL,GAC3BM,EAAQD,EAAUC,MAClBC,EAASF,EAAUE,OAEnBD,GAASC,GACXhI,KAAKiI,WAAWF,EAAOC,EAAO/D,MAAO+D,EAAO7C,KAGxCnF,KAAK0F,OAAS1F,KAAK0F,MAAM1F,KAAK0F,MAAMlC,OAAS,KACjDxD,KAAK0F,YAEP1F,KAAK0F,MAAM1F,KAAK0F,MAAMlC,OAAS,GAAG8D,MAChCzH,EAAG4H,EAAM5H,EACTC,EAAG2H,EAAM3H,EACTC,KAAM0H,EAAM1H,KACZmI,MAAOlI,KAAKsC,aAKlBZ,aAAaS,UAAUkB,WAAa,SAAUN,GAC5C,IAAIoF,EAAenI,KAAKoI,OAAO5E,OAAS,EACpCiE,EAAQzH,KAAKoI,OAAO,GAMxB,IAJKD,GAAgBV,GACnBzH,KAAKqI,SAASZ,GAGZA,EAAO,CACT,IAAIE,EAAiB3H,KAAK0F,MAAM1F,KAAK0F,MAAMlC,OAAS,GAChDoE,EAAYD,EAAeA,EAAenE,OAAS,GAIlDiE,EAAMnD,OAAOsD,IAChBD,EAAeL,MACbzH,EAAG4H,EAAM5H,EACTC,EAAG2H,EAAM3H,EACTC,KAAM0H,EAAM1H,KACZmI,MAAOlI,KAAKsC,WAKQ,mBAAftC,KAAKyC,OACdzC,KAAKyC,MAAMM,IAIfrB,aAAaS,UAAU6E,mBAAqB,WAC1ChH,KAAKiD,kBAAmB,EAExBjD,KAAK0C,QAAQ4F,iBAAiB,YAAatI,KAAK8C,kBAChD9C,KAAK0C,QAAQ4F,iBAAiB,YAAatI,KAAKmD,kBAChDiE,SAASkB,iBAAiB,UAAWtI,KAAKoD,iBAG5C1B,aAAaS,UAAU8E,mBAAqB,WAE1CjH,KAAK0C,QAAQ6F,MAAMC,cAAgB,OACnCxI,KAAK0C,QAAQ6F,MAAME,YAAc,OAEjCzI,KAAK0C,QAAQ4F,iBAAiB,aAActI,KAAKsD,mBACjDtD,KAAK0C,QAAQ4F,iBAAiB,YAAatI,KAAK2D,kBAChD3D,KAAK0C,QAAQ4F,iBAAiB,WAAYtI,KAAK6D,kBAGjDnC,aAAaS,UAAUwD,OAAS,WAC9B3F,KAAKoI,UACLpI,KAAK0I,cAAgB,EACrB1I,KAAK2I,YAAc3I,KAAK+B,SAAW/B,KAAKgC,UAAY,EACpDhC,KAAK2C,KAAK0C,UAAYrF,KAAKsC,UAG7BZ,aAAaS,UAAUuF,aAAe,SAAU7H,EAAGC,EAAGC,GACpD,IAAI6I,EAAO5I,KAAK0C,QAAQmG,wBAExB,OAAO,IAAIjJ,MAAMC,EAAI+I,EAAKE,KAAMhJ,EAAI8I,EAAKG,IAAKhJ,IAAQ,IAAIE,MAAOC,YAGnEwB,aAAaS,UAAU2F,UAAY,SAAUL,GAC3C,IAAIW,EAASpI,KAAKoI,OAKlB,GAFAA,EAAOd,KAAKG,GAERW,EAAO5E,OAAS,EAAG,CAGC,IAAlB4E,EAAO5E,QAAc4E,EAAOY,QAAQZ,EAAO,IAG/C,IAAIlD,EADElF,KAAKiJ,6BAA6Bb,EAAO,GAAIA,EAAO,GAAIA,EAAO,IACxDlD,GAETgE,EADElJ,KAAKiJ,6BAA6Bb,EAAO,GAAIA,EAAO,GAAIA,EAAO,IACxDnD,GACT8C,EAAQ,IAAI5H,OAAOiI,EAAO,GAAIlD,EAAIgE,EAAId,EAAO,IAC7CJ,EAAShI,KAAKmJ,sBAAsBpB,GAMxC,OAFAK,EAAOgB,SAEErB,MAAOA,EAAOC,OAAQA,GAGjC,UAGFtG,aAAaS,UAAU8G,6BAA+B,SAAUI,EAAIC,EAAIC,GACtE,IAAIC,EAAMH,EAAGxJ,EAAIyJ,EAAGzJ,EAChB4J,EAAMJ,EAAGvJ,EAAIwJ,EAAGxJ,EAChB4J,EAAMJ,EAAGzJ,EAAI0J,EAAG1J,EAChB8J,EAAML,EAAGxJ,EAAIyJ,EAAGzJ,EAEhB8J,GAAWP,EAAGxJ,EAAIyJ,EAAGzJ,GAAK,EAA1B+J,GAAmCP,EAAGvJ,EAAIwJ,EAAGxJ,GAAK,EAClD+J,GAAWP,EAAGzJ,EAAI0J,EAAG1J,GAAK,EAA1BgK,GAAmCP,EAAGxJ,EAAIyJ,EAAGzJ,GAAK,EAElDgK,EAAK3F,KAAKC,KAAKoF,EAAMA,EAAMC,EAAMA,GACjCM,EAAK5F,KAAKC,KAAKsF,EAAMA,EAAMC,EAAMA,GAKjCK,EAAID,GAAMD,EAAKC,GACfE,EAAUJ,GAJJD,EAAOC,GAIUG,EAAvBC,EAA6BJ,GAHvBD,EAAOC,GAG6BG,EAE1CE,EAAKZ,EAAGzJ,EAAIoK,EACZE,EAAKb,EAAGxJ,EAAImK,EAEhB,OACEhF,GAAI,IAAIrF,MAAMgK,EAAOM,EAAIN,EAAOO,GAChCjF,GAAI,IAAItF,MAAMiK,EAAOK,EAAIL,EAAOM,KAIpCzI,aAAaS,UAAUgH,sBAAwB,SAAUpB,GACvD,IAAI3H,EAAa2H,EAAM3H,WACnBG,EAAWwH,EAAMxH,SACjByH,GAAW/D,MAAO,KAAMkB,IAAK,MAE7BiF,EAAWpK,KAAK8B,qBAAuBvB,EAASyD,aAAa5D,IAAe,EAAIJ,KAAK8B,sBAAwB9B,KAAK0I,cAElH2B,EAAWrK,KAAKsK,aAAaF,GAQjC,OANApC,EAAO/D,MAAQjE,KAAK2I,WACpBX,EAAO7C,IAAMkF,EAEbrK,KAAK0I,cAAgB0B,EACrBpK,KAAK2I,WAAa0B,EAEXrC,GAGTtG,aAAaS,UAAUmI,aAAe,SAAUF,GAC9C,OAAOjG,KAAKoG,IAAIvK,KAAKgC,UAAYoI,EAAW,GAAIpK,KAAK+B,WAGvDL,aAAaS,UAAUqI,WAAa,SAAU3K,EAAGC,EAAG2K,GAClD,IAAIrF,EAAMpF,KAAK2C,KAEfyC,EAAIsF,OAAO7K,EAAGC,GACdsF,EAAIuF,IAAI9K,EAAGC,EAAG2K,EAAM,EAAG,EAAItG,KAAKyG,IAAI,GACpC5K,KAAK4F,UAAW,GAGlBlE,aAAaS,UAAU8F,WAAa,SAAUF,EAAO8C,EAAYC,GAC/D,IAAI1F,EAAMpF,KAAK2C,KACXoI,EAAaD,EAAWD,EACxBG,EAAY7G,KAAK8G,MAAMlD,EAAMvE,UAEjC4B,EAAI8F,YAEJ,IAAK,IAAIxG,EAAI,EAAGA,EAAIsG,EAAWtG,GAAK,EAAG,CAErC,IAAIC,EAAID,EAAIsG,EACRG,EAAKxG,EAAIA,EACTyG,EAAMD,EAAKxG,EACX0G,EAAI,EAAI1G,EACR2G,EAAKD,EAAIA,EACTE,EAAMD,EAAKD,EAEXxL,EAAI0L,EAAMxD,EAAM3H,WAAWP,EAC/BA,GAAK,EAAIyL,EAAK3G,EAAIoD,EAAM1H,SAASR,EACjCA,GAAK,EAAIwL,EAAIF,EAAKpD,EAAMzH,SAAST,EACjCA,GAAKuL,EAAMrD,EAAMxH,SAASV,EAE1B,IAAIC,EAAIyL,EAAMxD,EAAM3H,WAAWN,EAC/BA,GAAK,EAAIwL,EAAK3G,EAAIoD,EAAM1H,SAASP,EACjCA,GAAK,EAAIuL,EAAIF,EAAKpD,EAAMzH,SAASR,EACjCA,GAAKsL,EAAMrD,EAAMxH,SAAST,EAE1B,IAAIyF,EAAQsF,EAAaO,EAAML,EAC/B/K,KAAKwK,WAAW3K,EAAGC,EAAGyF,GAGxBH,EAAIoG,YACJpG,EAAIqG,QAGN/J,aAAaS,UAAUkG,SAAW,SAAUZ,GAC1C,IAAIrC,EAAMpF,KAAK2C,KACX4C,EAAgC,mBAAjBvF,KAAKqC,QAAyBrC,KAAKqC,UAAYrC,KAAKqC,QAEvE+C,EAAI8F,YACJlL,KAAKwK,WAAW/C,EAAM5H,EAAG4H,EAAM3H,EAAGyF,GAClCH,EAAIoG,YACJpG,EAAIqG,QAGN/J,aAAaS,UAAUuJ,UAAY,SAAUC,EAAaC,EAAWC,GACnE,IAAK,IAAInH,EAAI,EAAGA,EAAIiH,EAAYnI,OAAQkB,GAAK,EAAG,CAC9C,IAAIoH,EAAQH,EAAYjH,GAExB,GAAIoH,EAAMtI,OAAS,EACjB,IAAK,IAAIuI,EAAI,EAAGA,EAAID,EAAMtI,OAAQuI,GAAK,EAAG,CACxC,IAAIC,EAAWF,EAAMC,GACjBtE,EAAQ,IAAI7H,MAAMoM,EAASnM,EAAGmM,EAASlM,EAAGkM,EAASjM,MACnDmI,EAAQ8D,EAAS9D,MAErB,GAAU,IAAN6D,EAKF/L,KAAKsC,SAAW4F,EAChBlI,KAAK2F,SAEL3F,KAAK8H,UAAUL,QACV,GAAIsE,IAAMD,EAAMtI,OAAS,EAAG,CAEjC,IAAIyI,EAAajM,KAAK8H,UAAUL,GAC5BM,EAAQkE,EAAWlE,MACnBC,EAASiE,EAAWjE,OAEpBD,GAASC,GACX4D,EAAU7D,EAAOC,EAAQE,SAO/BlI,KAAK2F,SAELkG,EADgBC,EAAM,MAM5BpK,aAAaS,UAAUwE,OAAS,WAC9B,IAAIuF,EAASlM,KAET2L,EAAc3L,KAAK0F,MACnB/D,EAAS3B,KAAK0C,QACdyD,EAAQhC,KAAKoG,IAAInE,OAAOC,kBAAoB,EAAG,GAG/C8F,EAAOxK,EAAO4D,MAAQY,EACtBiG,EAAOzK,EAAO6D,OAASW,EACvBkG,EAAMjF,SAASkF,gBAAgB,6BAA8B,OAEjED,EAAIE,eAAe,KAAM,QAAS5K,EAAO4D,OACzC8G,EAAIE,eAAe,KAAM,SAAU5K,EAAO6D,QAE1CxF,KAAK0L,UAAUC,EAAa,SAAU5D,EAAOC,EAAQE,GACnD,IAAIsE,EAAOpF,SAASqF,cAAc,QAKlC,KAAKC,MAAM3E,EAAM1H,SAASR,IAAO6M,MAAM3E,EAAM1H,SAASP,IAAO4M,MAAM3E,EAAMzH,SAAST,IAAO6M,MAAM3E,EAAMzH,SAASR,IAAI,CAChH,IAAI6M,EAAO,KAAO5E,EAAM3H,WAAWP,EAAE+M,QAAQ,GAAK,IAAM7E,EAAM3H,WAAWN,EAAE8M,QAAQ,GAAK,MAAc7E,EAAM1H,SAASR,EAAE+M,QAAQ,GAAK,IAAM7E,EAAM1H,SAASP,EAAE8M,QAAQ,GAAK,IAAQ7E,EAAMzH,SAAST,EAAE+M,QAAQ,GAAK,IAAM7E,EAAMzH,SAASR,EAAE8M,QAAQ,GAAK,IAAQ7E,EAAMxH,SAASV,EAAE+M,QAAQ,GAAK,IAAM7E,EAAMxH,SAAST,EAAE8M,QAAQ,GAEvTJ,EAAKK,aAAa,IAAKF,GACvBH,EAAKK,aAAa,gBAA8B,KAAb7E,EAAO7C,KAAYyH,QAAQ,IAC9DJ,EAAKK,aAAa,SAAU3E,GAC5BsE,EAAKK,aAAa,OAAQ,QAC1BL,EAAKK,aAAa,iBAAkB,SAEpCR,EAAIS,YAAYN,KAEjB,SAAUR,GACX,IAAIe,EAAS3F,SAASqF,cAAc,UAChCpK,EAAoC,mBAAnB6J,EAAO7J,QAAyB6J,EAAO7J,UAAY6J,EAAO7J,QAC/E0K,EAAOF,aAAa,IAAKxK,GACzB0K,EAAOF,aAAa,KAAMb,EAASnM,GACnCkN,EAAOF,aAAa,KAAMb,EAASlM,GACnCiN,EAAOF,aAAa,OAAQb,EAAS9D,OAErCmE,EAAIS,YAAYC,KAGlB,IACIC,EAAS,mGAA2Ib,EAAO,IAAMC,EAAO,YAAqBD,EAAO,aAAsBC,EAAO,KACjOa,EAAOZ,EAAIa,UAGf,QAAalH,IAATiH,EAAoB,CACtB,IAAIE,EAAQ/F,SAASqF,cAAc,SAC/BW,EAAQf,EAAIgB,WAChBF,EAAMD,UAAY,GAElB,IAAK,IAAIxI,EAAI,EAAGA,EAAI0I,EAAM5J,OAAQkB,GAAK,EACrCyI,EAAML,YAAYM,EAAM1I,GAAG4I,WAAU,IAGvCL,EAAOE,EAAMD,UAMf,MApBa,6BAoBGK,KAFLP,EAASC,EADP,WAMfvL,aAAaS,UAAUqL,SAAW,SAAU7B,GAC1C,IAAI8B,EAASzN,KAEbA,KAAK6C,QAEL7C,KAAK0L,UAAUC,EAAa,SAAU5D,EAAOC,GAC3C,OAAOyF,EAAOxF,WAAWF,EAAOC,EAAO/D,MAAO+D,EAAO7C,MACpD,SAAU6G,GACX,OAAOyB,EAAOpF,SAAS2D,KAIzBhM,KAAK0F,MAAQiG,OAGfjK,aAAaS,UAAUuL,OAAS,WAC9B,OAAO1N,KAAK0F,OCxkBd,eAAiB,SAAWiI,EAAOC,EAAYC,EAAUC,GAKxD,IAAIC,EAGAC,EAAW,EA8Df,MA3D2B,kBAAfJ,IACXE,EAAeD,EACfA,EAAWD,EACXA,OAAa5H,GAMd,WAEC,IAAIpE,EAAO5B,KACPiO,EAAUC,OAAO,IAAIjO,MAAU+N,EAC/BnN,EAAOS,UAGX,SAAS6M,IACRH,EAAWE,OAAO,IAAIjO,MACtB4N,EAASzM,MAAMQ,EAAMf,GASjBiN,IAAiBC,GAGrBI,IAIIJ,GACJxM,aAAawM,QAGQ/H,IAAjB8H,GAA8BG,EAAUN,EAG5CQ,KAE0B,IAAfP,IAUXG,EAAYtM,WAAWqM,EA9BxB,WACCC,OAAY/H,GA6BkCmI,OAAuBnI,IAAjB8H,EAA6BH,EAAQM,EAAUN,uIChErF,SAAWA,EAAOS,EAASP,GAC3C,YAAoB7H,IAAb6H,EAAyBrN,WAASmN,EAAOS,GAAS,GAAS5N,WAASmN,EAAOE,GAAsB,IAAZO,yhCCdvF1M,sCAkBU2M,iHACFA,aAEDC,OAASC,YAAa,EAAGC,aAAc,KAEvCC,mBAAqBC,SACtB3I,EAAKsI,MAAMM,iBACX5I,EAAK6I,aAAaC,yFAKlB7O,KAAK0C,UACA1C,KAAKqO,MAAM9I,OAAUvF,KAAKqO,MAAM7I,cAC5B9C,QAAQ6F,MAAMhD,MAAQ,aAE1BuJ,cAEA9O,KAAKqO,MAAM9I,OAAUvF,KAAKqO,MAAM7I,eAC1B8C,iBAAiB,SAAUtI,KAAKyO,yBAGtCM,cAAgB,IAAIC,aAAOhP,KAAK0C,QAAS1C,KAAKqO,MAAM1N,yDAKxDX,KAAKqO,MAAM9I,OAAUvF,KAAKqO,MAAM7I,eAC1B2B,oBAAoB,SAAUnH,KAAKyO,yBAGzCM,cAAc7H,+CAuFZlH,KAAK+O,cAAc1H,+CAIrB0H,cAAclM,4CAGXoM,QACHF,cAAclJ,YAAYoJ,qCAGzBC,UACClP,KAAK+O,cAActI,UAAUyI,oCAG/BC,QACAJ,cAAcvB,SAAS2B,2CAIrBnP,KAAK+O,cAAcrB,4CAIrBqB,cAAc7H,wCAId6H,cAAchL,iDAId+K,wDAIC3I,EAAQhC,KAAKoG,IAAInE,OAAOC,kBAAoB,EAAG,GAC/Cd,GAASvF,KAAKqO,MAAM9I,OAASvF,KAAK0C,QAAQ0M,aAAejJ,EACzDX,GAAUxF,KAAKqO,MAAM7I,QAAUxF,KAAK0C,QAAQ2M,cAAgBlJ,IAG9BnG,KAAKsO,MAAlCC,IAAAA,YAAaC,IAAAA,gBAChBjJ,IAAUgJ,GAAe/I,IAAWgJ,OAEpCW,SACAnP,KAAKqO,MAAMiB,gBAAkBtP,KAAK+O,kBAC3B/O,KAAK+O,cAActI,kBAGzB/D,QAAQ6C,MAAQA,OAChB7C,QAAQ8C,OAASA,OAEjB+J,UAAUhB,YAAahJ,EAAOiJ,aAAchJ,IAErCxF,KAAK0C,QAAQE,WAAW,MAChC4M,MAAMrJ,EAAOA,GAEbnG,KAAKqO,MAAMiB,gBAAkBtP,KAAK+O,mBAC7BA,cAAclJ,YAAYsJ,GACxBnP,KAAK+O,oBACPA,cAAclM,qDAKhB4M,EAAezP,KAAKqO,MAApBoB,mBAGHC,oDACS,mBAAOxD,EAAKxJ,QAAUiN,IACvBF,4CAtJLzP,KAAK+O,oDAIL/O,KAAK0C,sCAGJL,QACH0M,cAAc1M,QAAUA,yBAItBrC,KAAK+O,cAAc1M,uCAGjBN,QACJgN,cAAchN,SAAWA,yBAIvB/B,KAAK+O,cAAchN,wCAGjBC,QACJ+M,cAAc/M,SAAWA,yBAIvBhC,KAAK+O,cAAc/M,wCAGjBxB,QACJuO,cAAcvO,SAAWA,yBAIvBR,KAAK+O,cAAcvO,+CAGV0H,QACX6G,cAAcxM,gBAAkB2F,yBAI9BlI,KAAK+O,cAAcxM,+CAGjB2F,QACJ6G,cAAczM,SAAW4F,yBAIvBlI,KAAK+O,cAAczM,oDAGLsN,QAChBb,cAAcjN,qBAAuB8N,yBAInC5P,KAAK+O,cAAcjN,mDAGlB+N,OACFA,GAAoB,mBAAPA,QACT,IAAIC,MAAM,6CAGff,cAAcvM,QAAUqN,8BAGvBA,OACAA,GAAoB,mBAAPA,QACT,IAAIC,MAAM,2CAGff,cAActM,MAAQoN,SApIRE,qBAArBrO,eAEKsO,YAAc,8BAFnBtO,eAIKuO,iBACIC,UAAUC,cACTD,UAAUC,eACTD,UAAUE,sBACHF,UAAUG,KAAKC,4BACbJ,UAAUC,OAAOG,uBACtBJ,UAAUE,QAVzB1O,eAaK6O,8BACa,mBACE"}